<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Bot - Deriv API</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a73e8;
            --secondary: #4285f4;
            --dark: #202124;
            --light: #f8f9fa;
            --success: #34a853;
            --danger: #ea4335;
            --warning: #fbbc04;
            --info: #4285f4;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
            color: var(--warning);
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            color: var(--primary);
            font-weight: bold;
        }
        
        .nav {
            background-color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-links li {
            margin-right: 20px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .nav-links a:hover, .nav-links a.active {
            background-color: var(--primary);
            color: white;
        }
        
        .main-content {
            padding: 2rem 0;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .card-header {
            border-bottom: 1px solid #eee;
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        .card-body {
            color: #555;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .btn:hover {
            background-color: var(--secondary);
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #2d9249;
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #d33b2c;
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: var(--dark);
        }
        
        .btn-warning:hover {
            background-color: #e0a800;
        }
        
        .btn-info {
            background-color: var(--info);
        }
        
        .btn-info:hover {
            background-color: #3b78e7;
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .bot-container {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1.5rem;
            min-height: 400px;
        }
        
        .bot-status {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .status-running {
            background-color: var(--success);
            box-shadow: 0 0 5px var(--success);
        }
        
        .status-stopped {
            background-color: var(--danger);
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 1.5rem;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-weight: 500;
        }
        
        .tab.active {
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .api-info {
            background-color: #e8f0fe;
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .api-info h3 {
            margin-top: 0;
            color: var(--primary);
        }
        
        .api-info p {
            margin-bottom: 0.5rem;
        }
        
        .api-key {
            font-family: monospace;
            background-color: #f1f3f4;
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            padding: 1.5rem;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin: 0.5rem 0;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }
        
        .hidden {
            display: none;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 4px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease-out;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background-color: var(--success);
        }
        
        .notification.error {
            background-color: var(--danger);
        }
        
        .notification.warning {
            background-color: var(--warning);
            color: var(--dark);
        }
        
        .notification.info {
            background-color: var(--info);
        }
        
        footer {
            background-color: var(--dark);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        
        .footer-section {
            flex: 1;
            min-width: 250px;
            margin-bottom: 1.5rem;
        }
        
        .footer-section h3 {
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 0.5rem;
        }
        
        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            margin-top: 1.5rem;
            border-top: 1px solid #444;
            font-size: 0.9rem;
            color: #aaa;
        }
        
        .market-timer {
            background-color: #fff8e1;
            border-left: 4px solid var(--warning);
            padding: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }
        
        .market-timer h4 {
            margin-top: 0;
            color: var(--warning);
        }
        
        .progress {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 0.5rem;
        }
        
        .progress-bar {
            height: 100%;
            background-color: var(--warning);
            width: 0%;
            transition: width 1s linear;
        }
        
        .current-market {
            display: flex;
            align-items: center;
            background-color: #e8f5e9;
            padding: 0.75rem 1rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }
        
        .current-market i {
            color: var(--success);
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .market-info {
            flex: 1;
        }
        
        .market-name {
            font-weight: 600;
            color: var(--dark);
        }
        
        .market-time {
            font-size: 0.85rem;
            color: #666;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 0.5rem;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            background-color: #f1f3f4;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .checkbox-item:hover {
            background-color: #e8eaed;
        }
        
        .checkbox-item input {
            margin-right: 8px;
        }
        
        .login-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 2rem;
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .login-header h2 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .login-header p {
            color: #666;
        }
        
        .login-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            color: white;
            font-size: 2rem;
        }
        
        .forgot-password {
            text-align: right;
            margin-top: 1rem;
        }
        
        .forgot-password a {
            color: var(--primary);
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        .forgot-password a:hover {
            text-decoration: underline;
        }
        
        .divider {
            display: flex;
            align-items: center;
            margin: 1.5rem 0;
        }
        
        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background-color: #ddd;
        }
        
        .divider span {
            padding: 0 1rem;
            color: #666;
            font-size: 0.9rem;
        }
        
        .signup-link {
            text-align: center;
            margin-top: 1.5rem;
            color: #666;
        }
        
        .signup-link a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .signup-link a:hover {
            text-decoration: underline;
        }
        
        .risk-management {
            background-color: #f1f8e9;
            border-left: 4px solid var(--success);
            padding: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }
        
        .risk-management h4 {
            margin-top: 0;
            color: var(--success);
        }
        
        .risk-management-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .risk-item {
            background-color: white;
            border-radius: 4px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .risk-item h5 {
            margin-top: 0;
            color: var(--dark);
            display: flex;
            align-items: center;
        }
        
        .risk-item h5 i {
            margin-right: 8px;
        }
        
        .risk-item p {
            margin-bottom: 0;
            color: #666;
            font-size: 0.9rem;
        }
        
        .take-profit {
            border-left: 3px solid var(--success);
        }
        
        .stop-loss {
            border-left: 3px solid var(--danger);
        }
        
        .api-terminal {
            background-color: #263238;
            color: #eeffff;
            border-radius: 8px;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 1rem;
        }
        
        .api-terminal .line {
            margin-bottom: 0.5rem;
        }
        
        .api-terminal .request {
            color: #c3e88d;
        }
        
        .api-terminal .response {
            color: #82aaff;
        }
        
        .api-terminal .error {
            color: #f07178;
        }
        
        .api-terminal .success {
            color: #c3e88d;
        }
        
        .github-section {
            background-color: #f6f8fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .github-section h4 {
            margin-top: 0;
            color: var(--dark);
            display: flex;
            align-items: center;
        }
        
        .github-section h4 i {
            margin-right: 10px;
            color: #333;
        }
        
        .github-section p {
            margin-bottom: 1rem;
        }
        
        .github-link {
            display: inline-flex;
            align-items: center;
            background-color: #24292e;
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        
        .github-link:hover {
            background-color: #1b1f23;
        }
        
        .github-link i {
            margin-right: 8px;
        }
        
        .debug-panel {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .debug-panel h4 {
            margin-top: 0;
            color: var(--dark);
        }
        
        .debug-info {
            font-family: monospace;
            font-size: 0.85rem;
            background-color: #fff;
            padding: 0.5rem;
            border-radius: 3px;
            margin-top: 0.5rem;
        }
        
        .simple-test {
            background-color: #f0f7ff;
            border: 1px solid #b6d7ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .simple-test h4 {
            margin-top: 0;
            color: var(--primary);
        }
        
        .simple-test-result {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 1rem;
            margin-top: 1rem;
            font-family: monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .account-selection {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .account-selection h4 {
            margin-top: 0;
            color: var(--dark);
            margin-bottom: 1rem;
        }
        
        .account-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .account-card:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .account-card.selected {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
        }
        
        .account-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .account-type {
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
        }
        
        .account-type i {
            margin-right: 8px;
        }
        
        .account-balance {
            font-weight: 700;
            color: var(--primary);
        }
        
        .account-details {
            color: #666;
            font-size: 0.9rem;
        }
        
        .account-details div {
            margin-bottom: 0.25rem;
        }
        
        .deriv-login {
            background-color: #f0f7ff;
            border: 1px solid #b6d7ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .deriv-login h4 {
            margin-top: 0;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .deriv-login-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            text-decoration: none;
        }
        
        .deriv-login-btn:hover {
            background-color: var(--secondary);
        }
        
        .deriv-login-btn i {
            margin-right: 8px;
        }
        
        .deriv-info {
            margin-top: 1rem;
            color: #666;
            font-size: 0.9rem;
        }
        
        .token-form {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .token-form h4 {
            margin-top: 0;
            color: var(--dark);
            margin-bottom: 1rem;
        }
        
        .token-form .form-group {
            margin-bottom: 1rem;
        }
        
        .token-help {
            background-color: #e8f0fe;
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 4px;
        }
        
        .token-help h5 {
            margin-top: 0;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .token-help ol {
            margin-left: 1.5rem;
            margin-bottom: 0;
        }
        
        .token-help li {
            margin-bottom: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .nav-links {
                flex-direction: column;
                margin-top: 1rem;
            }
            
            .nav-links li {
                margin: 0 0 10px 0;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .risk-management-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-robot"></i>
                    <span>TradingBot Pro</span>
                </div>
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">JD</div>
                    <div id="userInfo">
                        <div id="userName">John Doe</div>
                        <div id="userStatus">Non connecté</div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <nav class="nav">
        <div class="container">
            <ul class="nav-links">
                <li><a href="#" class="active">Tableau de bord</a></li>
                <li><a href="#">Bot de Trading</a></li>
                <li><a href="#">API Deriv</a></li>
                <li><a href="#">Statistiques</a></li>
                <li><a href="#">Paramètres</a></li>
            </ul>
        </div>
    </nav>
    
    <main class="main-content">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Trades aujourd'hui</div>
                    <div class="stat-value">24</div>
                    <div class="stat-label">+12% vs hier</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Taux de réussite</div>
                    <div class="stat-value">68%</div>
                    <div class="stat-label">+3% vs hier</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Profit/Perte</div>
                    <div class="stat-value">+$124.50</div>
                    <div class="stat-label">+$45.20 aujourd'hui</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Solde du compte</div>
                    <div class="stat-value" id="accountBalance">$1,245.75</div>
                    <div class="stat-label">+$89.30 cette semaine</div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Bot de Trading</h2>
                </div>
                <div class="card-body">
                    <div class="bot-status">
                        <div class="status-indicator status-stopped"></div>
                        <span id="botStatusText">Arrêté</span>
                    </div>
                    
                    <div class="current-market hidden" id="currentMarketInfo">
                        <i class="fas fa-chart-line"></i>
                        <div class="market-info">
                            <div class="market-name" id="currentMarketName">R_10</div>
                            <div class="market-time" id="currentMarketTime">Marché actif depuis 2 min 30 sec</div>
                        </div>
                    </div>
                    
                    <div class="market-timer hidden" id="marketTimer">
                        <h4>Changement de marché imminent</h4>
                        <p>Aucun signal détecté depuis <span id="timeWithoutSignal">0</span> minutes. Changement de marché dans <span id="timeUntilChange">5</span> minutes.</p>
                        <div class="progress">
                            <div class="progress-bar" id="progressBar"></div>
                        </div>
                    </div>
                    
                    <div class="tabs">
                        <div class="tab active">Configuration</div>
                        <div class="tab">Indicateurs</div>
                        <div class="tab">Stratégie</div>
                        <div class="tab">Gestion des Risques</div>
                        <div class="tab">API Terminal</div>
                        <div class="tab">Test Simple</div>
                        <div class="tab">Journal</div>
                    </div>
                    
                    <div class="tab-content active">
                        <div class="bot-container">
                            <h3>Configuration du Bot</h3>
                            <p>Ce bot utilise une stratégie multi-indicateurs avec EMA, MACD, RSI et Bollinger Bands.</p>
                            
                            <div class="form-group">
                                <label>Marchés disponibles</label>
                                <div class="checkbox-group">
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="market1" value="R_10" checked>
                                        <label for="market1">R_10 (Volatility 10)</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="market2" value="R_25">
                                        <label for="market2">R_25 (Volatility 25)</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="market3" value="R_50">
                                        <label for="market3">R_50 (Volatility 50)</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="market4" value="R_75">
                                        <label for="market4">R_75 (Volatility 75)</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="market5" value="R_100">
                                        <label for="market5">R_100 (Volatility 100)</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Durée du trade (minutes)</label>
                                <input type="number" class="form-control" id="tradeDuration" value="1" min="1" max="60">
                            </div>
                            
                            <div class="form-group">
                                <label>Temps avant changement de marché (minutes)</label>
                                <input type="number" class="form-control" id="marketChangeTime" value="5" min="1" max="60">
                            </div>
                            
                            <div class="form-group">
                                <label>Montant par trade ($)</label>
                                <input type="number" class="form-control" id="tradeAmount" value="0.35" min="0.1" step="0.05">
                            </div>
                            
                            <div class="form-group">
                                <label>Intervalle de bougie</label>
                                <select class="form-control">
                                    <option>1 minute</option>
                                    <option>5 minutes</option>
                                    <option>15 minutes</option>
                                    <option selected>1 heure</option>
                                    <option>4 heures</option>
                                </select>
                            </div>
                            
                            <div style="margin-top: 2rem;">
                                <button class="btn btn-success" id="startBotBtn">
                                    <i class="fas fa-play"></i> Démarrer le Bot
                                </button>
                                <button class="btn btn-danger" id="stopBotBtn" style="display: none;">
                                    <i class="fas fa-stop"></i> Arrêter le Bot
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content">
                        <div class="bot-container">
                            <h3>Indicateurs Utilisés</h3>
                            <ul>
                                <li><strong>EMA20:</strong> Exponential Moving Average (période 20)</li>
                                <li><strong>EMA50:</strong> Exponential Moving Average (période 50)</li>
                                <li><strong>MACD:</strong> Moving Average Convergence Divergence (12, 26, 9)</li>
                                <li><strong>RSI:</strong> Relative Strength Index (période 14)</li>
                                <li><strong>Bollinger Bands:</strong> (période 20, écart-type 2)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="tab-content">
                        <div class="bot-container">
                            <h3>Stratégie de Trading</h3>
                            <h4>Signal d'Achat (CALL):</h4>
                            <ul>
                                <li>RSI < 30 (condition de survente)</li>
                                <li>EMA20 > EMA50 (tendance haussière)</li>
                                <li>RSI > 30 (sortie de survente)</li>
                                <li>Bande de Bollinger (close) > Bande de Bollinger (open)</li>
                                <li>MACD > Signal (momentum haussier)</li>
                            </ul>
                            
                            <h4>Signal de Vente (PUT):</h4>
                            <ul>
                                <li>EMA20 < EMA50 (tendance baissière)</li>
                                <li>RSI < 30 (condition de survente)</li>
                                <li>Bande de Bollinger (close) < Bande de Bollinger (open)</li>
                                <li>MACD < Signal (momentum baissier)</li>
                            </ul>
                            
                            <h4>Changement de marché automatique:</h4>
                            <p>Si aucun signal n'est détecté pendant 5 minutes, le bot change automatiquement de marché pour trouver de meilleures opportunités de trading.</p>
                        </div>
                    </div>
                    
                    <div class="tab-content">
                        <div class="bot-container">
                            <h3>Gestion des Risques</h3>
                            <div class="risk-management">
                                <h4>Paramètres de Gestion des Risques</h4>
                                <p>Configurez vos niveaux de Take Profit et Stop Loss pour protéger votre capital et maximiser vos gains.</p>
                                
                                <div class="risk-management-grid">
                                    <div class="risk-item take-profit">
                                        <h5><i class="fas fa-arrow-up text-success"></i> Take Profit</h5>
                                        <div class="form-group">
                                            <label>Profit cible ($)</label>
                                            <input type="number" class="form-control" id="takeProfit" value="5" min="0.1" step="0.1">
                                        </div>
                                        <p>Le trade se clôturera automatiquement lorsque ce profit sera atteint.</p>
                                    </div>
                                    
                                    <div class="risk-item stop-loss">
                                        <h5><i class="fas fa-arrow-down text-danger"></i> Stop Loss</h5>
                                        <div class="form-group">
                                            <label>Perte maximale ($)</label>
                                            <input type="number" class="form-control" id="stopLoss" value="1" min="0.1" step="0.1">
                                        </div>
                                        <p>Le trade se clôturera automatiquement lorsque cette perte sera atteinte.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 1.5rem;">
                                <h4>Comment ça fonctionne ?</h4>
                                <p>Chaque trade ouvert par le bot sera automatiquement clôturé lorsque l'un de ces seuils sera atteint :</p>
                                <ul>
                                    <li><strong>Take Profit:</strong> Lorsque le profit atteint 5 USD, le trade est clôturé avec un gain.</li>
                                    <li><strong>Stop Loss:</strong> Lorsque la perte atteint 1 USD, le trade est clôturé pour limiter les pertes.</li>
                                </ul>
                                <p>Cette gestion des risques permet de protéger votre capital et de sécuriser vos gains automatiquement.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content">
                        <div class="bot-container">
                            <h3>API Terminal</h3>
                            <p>Ce terminal affiche les communications avec l'API Deriv en temps réel.</p>
                            
                            <div class="api-terminal" id="apiTerminal">
                                <div class="line">En attente de connexion à l'API Deriv...</div>
                            </div>
                            
                            <div style="margin-top: 1rem;">
                                <button class="btn btn-info" id="testApiBtn">Tester la connexion API</button>
                                <button class="btn btn-warning" id="clearTerminalBtn">Effacer le terminal</button>
                                <button class="btn btn-success" id="getTicksBtn">Obtenir les ticks</button>
                            </div>
                            
                            <div class="debug-panel">
                                <h4>Informations de débogage</h4>
                                <div class="debug-info" id="debugInfo">
                                    App ID: Non défini<br>
                                    Token: Non défini<br>
                                    Statut: Non connecté
                                </div>
                            </div>
                            
                            <div class="github-section">
                                <h4><i class="fab fa-github"></i> Intégration GitHub</h4>
                                <p>Ce projet utilise l'API Deriv avec une intégration locale via GitHub pour le développement et le déploiement.</p>
                                <a href="https://github.com/deriv-com/API" target="_blank" class="github-link">
                                    <i class="fab fa-github"></i> Voir la documentation API
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content">
                        <div class="bot-container">
                            <h3>Test Simple API</h3>
                            <p>Cette section permet de tester l'API Deriv avec des requêtes simples pour diagnostiquer les problèmes.</p>
                            
                            <div class="simple-test">
                                <h4>Test de connexion à l'API</h4>
                                <p>Cliquez sur le bouton ci-dessous pour tester la connexion à l'API Deriv avec vos identifiants.</p>
                                
                                <button class="btn btn-success" id="simpleTestBtn">Tester la connexion</button>
                                
                                <div class="simple-test-result" id="simpleTestResult">
                                    Cliquez sur "Tester la connexion" pour voir les résultats...
                                </div>
                            </div>
                            
                            <div class="simple-test" style="margin-top: 1.5rem;">
                                <h4>Obtenir les prix du marché</h4>
                                <p>Testez la récupération des prix pour un marché spécifique.</p>
                                
                                <div class="form-group">
                                    <label>Sélectionner un marché</label>
                                    <select class="form-control" id="marketSelect">
                                        <option value="R_10">R_10 (Volatility 10)</option>
                                        <option value="R_25">R_25 (Volatility 25)</option>
                                        <option value="R_50">R_50 (Volatility 50)</option>
                                        <option value="R_75">R_75 (Volatility 75)</option>
                                        <option value="R_100">R_100 (Volatility 100)</option>
                                    </select>
                                </div>
                                
                                <button class="btn btn-info" id="getPriceBtn">Obtenir les prix</button>
                                
                                <div class="simple-test-result" id="priceResult" style="margin-top: 1rem;">
                                    Sélectionnez un marché et cliquez sur "Obtenir les prix"...
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content">
                        <div class="bot-container">
                            <h3>Journal de Trading</h3>
                            <div style="max-height: 300px; overflow-y: auto;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background-color: #f1f3f4;">
                                            <th style="padding: 8px; text-align: left;">Heure</th>
                                            <th style="padding: 8px; text-align: left;">Actif</th>
                                            <th style="padding: 8px; text-align: left;">Type</th>
                                            <th style="padding: 8px; text-align: left;">Durée</th>
                                            <th style="padding: 8px; text-align: left;">Montant</th>
                                            <th style="padding: 8px; text-align: left;">TP</th>
                                            <th style="padding: 8px; text-align: left;">SL</th>
                                            <th style="padding: 8px; text-align: left;">Résultat</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td style="padding: 8px;">14:32:15</td>
                                            <td style="padding: 8px;">R_10</td>
                                            <td style="padding: 8px;">CALL</td>
                                            <td style="padding: 8px;">1 min</td>
                                            <td style="padding: 8px;">$0.35</td>
                                            <td style="padding: 8px; color: var(--success);">$5.00</td>
                                            <td style="padding: 8px; color: var(--danger);">$1.00</td>
                                            <td style="padding: 8px; color: var(--success);">+$0.30</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;">14:28:42</td>
                                            <td style="padding: 8px;">R_10</td>
                                            <td style="padding: 8px;">PUT</td>
                                            <td style="padding: 8px;">1 min</td>
                                            <td style="padding: 8px;">$0.35</td>
                                            <td style="padding: 8px; color: var(--success);">$5.00</td>
                                            <td style="padding: 8px; color: var(--danger);">$1.00</td>
                                            <td style="padding: 8px; color: var(--danger);">-$0.35</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;">14:25:18</td>
                                            <td style="padding: 8px;">R_10</td>
                                            <td style="padding: 8px;">CALL</td>
                                            <td style="padding: 8px;">1 min</td>
                                            <td style="padding: 8px;">$0.35</td>
                                            <td style="padding: 8px; color: var(--success);">$5.00</td>
                                            <td style="padding: 8px; color: var(--danger);">$1.00</td>
                                            <td style="padding: 8px; color: var(--success);">+$0.30</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Connexion Deriv</h2>
                </div>
                <div class="card-body">
                    <div id="loginSection" class="hidden">
                        <div class="deriv-login">
                            <h4>Connexion sécurisée à Deriv</h4>
                            <p>Connectez-vous à votre compte Deriv pour que nous puissions récupérer automatiquement vos informations de compte.</p>
                            
                            <a href="https://app.deriv.com" target="_blank" class="deriv-login-btn">
                                <i class="fas fa-external-link-alt"></i> Se connecter à Deriv
                            </a>
                            
                            <div class="deriv-info">
                                <p>1. Cliquez sur le bouton ci-dessus pour vous connecter à Deriv</p>
                                <p>2. Une fois connecté, revenez sur cette page</p>
                                <p>3. Cliquez sur "Récupérer mes comptes" ci-dessous</p>
                            </div>
                            
                            <div class="token-form" id="tokenForm">
                                <h4>Saisissez votre token API</h4>
                                <div class="form-group">
                                    <label>Token API</label>
                                    <input type="password" class="form-control" id="apiTokenInput" placeholder="Collez votre token API ici">
                                </div>
                                
                                <button class="btn btn-success btn-block" id="fetchAccountsBtn">
                                    <i class="fas fa-sync-alt"></i> Récupérer mes comptes
                                </button>
                                
                                <div class="token-help">
                                    <h5>Comment obtenir votre token API ?</h5>
                                    <ol>
                                        <li>Connectez-vous à votre compte Deriv</li>
                                        <li>Allez dans "Paramètres du compte" → "Token API"</li>
                                        <li>Cliquez sur "Créer un nouveau token"</li>
                                        <li>Sélectionnez les permissions "trade" et "read"</li>
                                        <li>Copiez le token et collez-le ci-dessus</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                        
                        <div class="account-selection hidden" id="accountSelection">
                            <h4>Sélectionnez un compte</h4>
                            <p>Choisissez le compte que vous souhaitez utiliser pour le trading.</p>
                            
                            <div id="accountsList">
                                <!-- Les comptes seront chargés ici -->
                            </div>
                        </div>
                    </div>
                    
                    <div id="apiSection">
                        <div class="api-info">
                            <h3>Informations du Compte</h3>
                            <p><strong>Email:</strong> <span id="apiAccount">demo@deriv.com</span></p>
                            <p><strong>Type de compte:</strong> <span id="apiAccountType">Demo</span></p>
                            <p><strong>Balance:</strong> <span id="apiBalance">$10,000.00</span></p>
                            <p><strong>Devise:</strong> <span id="apiCurrency">USD</span></p>
                            <p><strong>Permissions:</span> <span id="apiPermissions">Trade, Read</span></p>
                        </div>
                        
                        <div style="margin-top: 1.5rem;">
                            <button class="btn btn-warning" id="refreshAccountsBtn">
                                <i class="fas fa-sync-alt"></i> Actualiser les comptes
                            </button>
                            <button class="btn btn-danger" id="logoutBtn">
                                <i class="fas fa-sign-out-alt"></i> Déconnexion
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>TradingBot Pro</h3>
                    <p>Une solution de trading automatisée pour les indices de volatilité Deriv.</p>
                </div>
                <div class="footer-section">
                    <h3>Liens rapides</h3>
                    <ul class="footer-links">
                        <li><a href="#">Documentation</a></li>
                        <li><a href="#">API Reference</a></li>
                        <li><a href="#">Support</a></li>
                        <li><a href="#">Conditions d'utilisation</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <ul class="footer-links">
                        <li><a href="#">contact@tradingbotpro.com</a></li>
                        <li><a href="#">+33 1 23 45 67 89</a></li>
                        <li><a href="#">Paris, France</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; 2023 TradingBot Pro. Tous droits réservés. Ce site n'est pas affilié à Deriv.
            </div>
        </div>
    </footer>
    
    <div class="notification" id="notification"></div>
    
    <script>
        // Variables globales
        let appId = '1089';
        let token = '';
        let connectionStatus = 'disconnected';
        let selectedAccount = null;
        let accounts = [];
        
        // Gestion des onglets
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Supprimer la classe active de tous les onglets
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Ajouter la classe active à l'onglet cliqué
                tab.classList.add('active');
                
                // Afficher le contenu correspondant
                const tabContent = document.querySelectorAll('.tab-content')[Array.from(document.querySelectorAll('.tab')).indexOf(tab)];
                tabContent.classList.add('active');
            });
        });
        
        // Variables globales pour le bot
        let botRunning = false;
        let marketChangeInterval;
        let marketTimerInterval;
        let currentMarketIndex = 0;
        let selectedMarkets = ['R_10'];
        let timeWithoutSignal = 0;
        let marketChangeTime = 5; // minutes
        let tradeDuration = 1; // minutes
        let tradeAmount = 0.35; // USD
        let takeProfit = 5; // USD
        let stopLoss = 1; // USD
        let marketStartTime;
        
        // Gestion du bot
        const startBotBtn = document.getElementById('startBotBtn');
        const stopBotBtn = document.getElementById('stopBotBtn');
        const botStatusText = document.getElementById('botStatusText');
        const statusIndicator = document.querySelector('.status-indicator');
        const currentMarketInfo = document.getElementById('currentMarketInfo');
        const currentMarketName = document.getElementById('currentMarketName');
        const currentMarketTime = document.getElementById('currentMarketTime');
        const marketTimer = document.getElementById('marketTimer');
        const timeWithoutSignalEl = document.getElementById('timeWithoutSignal');
        const timeUntilChangeEl = document.getElementById('timeUntilChange');
        const progressBar = document.getElementById('progressBar');
        
        startBotBtn.addEventListener('click', () => {
            // Vérifier si l'utilisateur est connecté à l'API
            if (connectionStatus !== 'connected' || !selectedAccount) {
                showNotification('Veuillez vous connecter à l\'API Deriv et sélectionner un compte', 'error');
                return;
            }
            
            // Récupérer les marchés sélectionnés
            selectedMarkets = [];
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                selectedMarkets.push(checkbox.value);
            });
            
            if (selectedMarkets.length === 0) {
                showNotification('Veuillez sélectionner au moins un marché', 'error');
                return;
            }
            
            // Récupérer les paramètres de trading
            tradeDuration = parseInt(document.getElementById('tradeDuration').value) || 1;
            marketChangeTime = parseInt(document.getElementById('marketChangeTime').value) || 5;
            tradeAmount = parseFloat(document.getElementById('tradeAmount').value) || 0.35;
            takeProfit = parseFloat(document.getElementById('takeProfit').value) || 5;
            stopLoss = parseFloat(document.getElementById('stopLoss').value) || 1;
            
            // Réinitialiser les variables
            currentMarketIndex = 0;
            timeWithoutSignal = 0;
            marketStartTime = new Date();
            
            // Simuler le démarrage du bot
            statusIndicator.classList.remove('status-stopped');
            statusIndicator.classList.add('status-running');
            botStatusText.textContent = 'En cours d\'exécution';
            startBotBtn.style.display = 'none';
            stopBotBtn.style.display = 'inline-block';
            
            // Afficher les informations du marché
            currentMarketInfo.classList.remove('hidden');
            currentMarketName.textContent = selectedMarkets[currentMarketIndex];
            updateMarketTime();
            
            // Démarrer le timer de changement de marché
            startMarketTimer();
            
            showNotification('Bot de trading démarré avec succès!', 'success');
            
            // Simuler l'exécution du bot avec gestion des risques
            setTimeout(() => {
                // Trade gagnant avec take profit atteint
                const profit = Math.min(0.30, takeProfit);
                addTradeToLog('CALL', selectedMarkets[currentMarketIndex], tradeDuration + ' min', '$' + tradeAmount.toFixed(2), '$' + takeProfit.toFixed(2), '$' + stopLoss.toFixed(2), '+$' + profit.toFixed(2));
                resetMarketTimer();
            }, 5000);
            
            setTimeout(() => {
                // Trade perdant avec stop loss atteint
                const loss = Math.min(0.35, stopLoss);
                addTradeToLog('PUT', selectedMarkets[currentMarketIndex], tradeDuration + ' min', '$' + tradeAmount.toFixed(2), '$' + takeProfit.toFixed(2), '$' + stopLoss.toFixed(2), '-$' + loss.toFixed(2));
                resetMarketTimer();
            }, 12000);
            
            setTimeout(() => {
                // Trade gagnant sans atteindre le take profit
                addTradeToLog('CALL', selectedMarkets[currentMarketIndex], tradeDuration + ' min', '$' + tradeAmount.toFixed(2), '$' + takeProfit.toFixed(2), '$' + stopLoss.toFixed(2), '+$0.30');
                resetMarketTimer();
            }, 20000);
        });
        
        stopBotBtn.addEventListener('click', () => {
            // Simuler l'arrêt du bot
            statusIndicator.classList.remove('status-running');
            statusIndicator.classList.add('status-stopped');
            botStatusText.textContent = 'Arrêté';
            stopBotBtn.style.display = 'none';
            startBotBtn.style.display = 'inline-block';
            
            // Cacher les informations du marché
            currentMarketInfo.classList.add('hidden');
            marketTimer.classList.add('hidden');
            
            // Arrêter les timers
            clearInterval(marketChangeInterval);
            clearInterval(marketTimerInterval);
            
            showNotification('Bot de trading arrêté', 'warning');
        });
        
        // Fonctions pour le timer de marché
        function startMarketTimer() {
            // Afficher le timer
            marketTimer.classList.remove('hidden');
            
            // Démarrer le timer de progression
            clearInterval(marketChangeInterval);
            marketChangeInterval = setInterval(() => {
                timeWithoutSignal += 0.1; // Augmenter de 0.1 minute (6 secondes)
                
                // Mettre à jour l'affichage
                timeWithoutSignalEl.textContent = timeWithoutSignal.toFixed(1);
                timeUntilChangeEl.textContent = Math.max(0, (marketChangeTime - timeWithoutSignal).toFixed(1));
                
                // Mettre à jour la barre de progression
                const progress = Math.min(100, (timeWithoutSignal / marketChangeTime) * 100);
                progressBar.style.width = progress + '%';
                
                // Vérifier si le temps est écoulé
                if (timeWithoutSignal >= marketChangeTime) {
                    changeMarket();
                }
            }, 6000); // Toutes les 6 secondes (0.1 minute)
            
            // Mettre à jour le temps d'affichage du marché
            marketTimerInterval = setInterval(updateMarketTime, 1000);
        }
        
        function resetMarketTimer() {
            timeWithoutSignal = 0;
            timeWithoutSignalEl.textContent = '0';
            timeUntilChangeEl.textContent = marketChangeTime;
            progressBar.style.width = '0%';
        }
        
        function changeMarket() {
            // Passer au marché suivant
            currentMarketIndex = (currentMarketIndex + 1) % selectedMarkets.length;
            
            // Mettre à jour l'affichage
            currentMarketName.textContent = selectedMarkets[currentMarketIndex];
            marketStartTime = new Date();
            
            // Réinitialiser le timer
            resetMarketTimer();
            
            // Afficher une notification
            showNotification(`Changement de marché vers ${selectedMarkets[currentMarketIndex]}`, 'info');
            
            // Simuler un trade après le changement de marché
            setTimeout(() => {
                // Trade avec take profit atteint
                const profit = Math.min(0.25, takeProfit);
                addTradeToLog('CALL', selectedMarkets[currentMarketIndex], tradeDuration + ' min', '$' + tradeAmount.toFixed(2), '$' + takeProfit.toFixed(2), '$' + stopLoss.toFixed(2), '+$' + profit.toFixed(2));
                resetMarketTimer();
            }, 8000);
        }
        
        function updateMarketTime() {
            if (marketStartTime) {
                const now = new Date();
                const diff = Math.floor((now - marketStartTime) / 1000); // en secondes
                
                const minutes = Math.floor(diff / 60);
                const seconds = diff % 60;
                
                currentMarketTime.textContent = `Marché actif depuis ${minutes} min ${seconds} sec`;
            }
        }
        
        // Gestion de l'API Deriv
        const loginSection = document.getElementById('loginSection');
        const apiSection = document.getElementById('apiSection');
        const tokenForm = document.getElementById('tokenForm');
        const fetchAccountsBtn = document.getElementById('fetchAccountsBtn');
        const refreshAccountsBtn = document.getElementById('refreshAccountsBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const testApiBtn = document.getElementById('testApiBtn');
        const getTicksBtn = document.getElementById('getTicksBtn');
        const clearTerminalBtn = document.getElementById('clearTerminalBtn');
        const apiTerminal = document.getElementById('apiTerminal');
        const debugInfo = document.getElementById('debugInfo');
        const simpleTestBtn = document.getElementById('simpleTestBtn');
        const simpleTestResult = document.getElementById('simpleTestResult');
        const getPriceBtn = document.getElementById('getPriceBtn');
        const priceResult = document.getElementById('priceResult');
        const marketSelect = document.getElementById('marketSelect');
        const accountSelection = document.getElementById('accountSelection');
        const accountsList = document.getElementById('accountsList');
        const apiTokenInput = document.getElementById('apiTokenInput');
        
        // Vérifier si l'utilisateur est déjà connecté
        const isLoggedIn = localStorage.getItem('derivLoggedIn') === 'true';
        
        if (isLoggedIn) {
            token = localStorage.getItem('derivToken') || '';
            
            if (token) {
                loginSection.classList.add('hidden');
                apiSection.classList.remove('hidden');
                
                // Mettre à jour les informations de l'utilisateur
                updateUserInfo();
            } else {
                loginSection.classList.remove('hidden');
                apiSection.classList.add('hidden');
            }
        } else {
            loginSection.classList.remove('hidden');
            apiSection.classList.add('hidden');
        }
        
        fetchAccountsBtn.addEventListener('click', () => {
            const userToken = apiTokenInput.value.trim();
            
            if (!userToken) {
                showNotification('Veuillez saisir votre token API', 'error');
                return;
            }
            
            token = userToken;
            
            // Sauvegarder le token
            localStorage.setItem('derivLoggedIn', 'true');
            localStorage.setItem('derivToken', token);
            
            // Récupérer les comptes
            fetchAccounts();
        });
        
        refreshAccountsBtn.addEventListener('click', () => {
            fetchAccounts();
        });
        
        logoutBtn.addEventListener('click', () => {
            localStorage.removeItem('derivLoggedIn');
            localStorage.removeItem('derivToken');
            
            loginSection.classList.remove('hidden');
            apiSection.classList.add('hidden');
            accountSelection.classList.add('hidden');
            tokenForm.classList.remove('hidden');
            
            connectionStatus = 'disconnected';
            selectedAccount = null;
            accounts = [];
            
            updateDebugInfo();
            
            showNotification('Déconnecté de Deriv', 'warning');
        });
        
        testApiBtn.addEventListener('click', () => {
            if (connectionStatus === 'connected' && selectedAccount) {
                testAPIConnection();
            } else {
                showNotification('Veuillez vous connecter et sélectionner un compte', 'error');
            }
        });
        
        getTicksBtn.addEventListener('click', () => {
            if (connectionStatus === 'connected' && selectedAccount) {
                getMarketData('R_10');
            } else {
                showNotification('Veuillez vous connecter et sélectionner un compte', 'error');
            }
        });
        
        clearTerminalBtn.addEventListener('click', () => {
            apiTerminal.innerHTML = '<div class="line">Terminal effacé</div>';
        });
        
        simpleTestBtn.addEventListener('click', () => {
            if (connectionStatus === 'connected' && selectedAccount) {
                simpleTestResult.innerHTML = '<div class="loading"></div> Test en cours...';
                
                // Test simple avec l'API REST
                const url = `https://deriv.binary.com/https://www.binary.com/en/api?action=authorize&authorize=${token}&app_id=${appId}`;
                
                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        console.log('Réponse API:', data);
                        
                        if (data.error) {
                            simpleTestResult.innerHTML = `<div style="color: var(--danger);">Erreur: ${data.error.message}</div>`;
                            showNotification(`Erreur API: ${data.error.message}`, 'error');
                        } else {
                            simpleTestResult.innerHTML = `
                                <div style="color: var(--success);">Connexion réussie!</div>
                                <div>Email: ${data.authorize.email}</div>
                                <div>Type de compte: ${data.authorize.is_virtual ? 'Demo' : 'Real'}</div>
                                <div>Token: ${token.substring(0, 10)}...</div>
                            `;
                            
                            showNotification('Connecté avec succès!', 'success');
                        }
                    })
                    .catch(error => {
                        console.error('Erreur:', error);
                        simpleTestResult.innerHTML = `<div style="color: var(--danger);">Erreur de connexion: ${error.message}</div>`;
                        showNotification(`Erreur de connexion: ${error.message}`, 'error');
                    });
            } else {
                simpleTestResult.innerHTML = '<div style="color: var(--danger);">Veuillez vous connecter et sélectionner un compte</div>';
            }
        });
        
        getPriceBtn.addEventListener('click', () => {
            if (connectionStatus === 'connected' && selectedAccount) {
                const market = marketSelect.value;
                priceResult.innerHTML = '<div class="loading"></div> Obtention des prix...';
                
                // Obtenir les prix du marché
                const url = `https://deriv.binary.com/https://www.binary.com/en/api?action=ticks&ticks=${market}&app_id=${appId}`;
                
                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        console.log('Réponse prix:', data);
                        
                        if (data.error) {
                            priceResult.innerHTML = `<div style="color: var(--danger);">Erreur: ${data.error.message}</div>`;
                            showNotification(`Erreur API: ${data.error.message}`, 'error');
                        } else {
                            priceResult.innerHTML = `
                                <div style="color: var(--success);">Données obtenues avec succès!</div>
                                <div>Marché: ${data.tick.symbol}</div>
                                <div>Prix: ${data.tick.quote}</div>
                                <div>Heure: ${new Date(data.tick.epoch * 1000).toLocaleString()}</div>
                            `;
                            
                            showNotification(`Prix obtenu pour ${market}: ${data.tick.quote}`, 'success');
                        }
                    })
                    .catch(error => {
                        console.error('Erreur:', error);
                        priceResult.innerHTML = `<div style="color: var(--danger);">Erreur de connexion: ${error.message}</div>`;
                        showNotification(`Erreur de connexion: ${error.message}`, 'error');
                    });
            } else {
                priceResult.innerHTML = '<div style="color: var(--danger);">Veuillez vous connecter et sélectionner un compte</div>';
            }
        });
        
        // Fonctions utilitaires
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification';
            notification.classList.add(type);
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        function addTradeToLog(type, asset, duration, amount, tp, sl, result) {
            const table = document.querySelector('tbody');
            const row = table.insertRow(0); // Insérer au début
            
            const time = new Date().toLocaleTimeString();
            
            row.innerHTML = `
                <td style="padding: 8px;">${time}</td>
                <td style="padding: 8px;">${asset}</td>
                <td style="padding: 8px;">${type}</td>
                <td style="padding: 8px;">${duration}</td>
                <td style="padding: 8px;">${amount}</td>
                <td style="padding: 8px; color: var(--success);">${tp}</td>
                <td style="padding: 8px; color: var(--danger);">${sl}</td>
                <td style="padding: 8px; color: ${result.startsWith('+') ? 'var(--success)' : 'var(--danger)'};">${result}</td>
            `;
        }
        
        function addTerminalMessage(type, message) {
            const line = document.createElement('div');
            line.className = 'line';
            
            if (type === 'request') {
                line.innerHTML = `<span class="request">> ${message}</span>`;
            } else if (type === 'response') {
                line.innerHTML = `<span class="response">< ${message}</span>`;
            } else if (type === 'error') {
                line.innerHTML = `<span class="error">! ${message}</span>`;
            } else if (type === 'success') {
                line.innerHTML = `<span class="success">✓ ${message}</span>`;
            }
            
            apiTerminal.appendChild(line);
            apiTerminal.scrollTop = apiTerminal.scrollHeight;
        }
        
        function updateDebugInfo() {
            debugInfo.innerHTML = `
                App ID: ${appId}<br>
                Token: ${token ? 'Défini' : 'Non défini'}<br>
                Compte sélectionné: ${selectedAccount ? selectedAccount.loginid : 'Aucun'}<br>
                Statut: ${connectionStatus}
            `;
        }
        
        function updateUserInfo() {
            if (selectedAccount) {
                document.getElementById('apiAccount').textContent = selectedAccount.email || selectedAccount.loginid;
                document.getElementById('apiAccountType').textContent = selectedAccount.is_virtual ? 'Demo' : 'Real';
                document.getElementById('apiBalance').textContent = `$${parseFloat(selectedAccount.balance).toFixed(2)}`;
                document.getElementById('apiCurrency').textContent = selectedAccount.currency || 'USD';
                document.getElementById('accountBalance').textContent = `$${parseFloat(selectedAccount.balance).toFixed(2)}`;
                
                // Extraire les initiales pour l'avatar
                const initials = (selectedAccount.email || selectedAccount.loginid).split('@')[0].split('.').map(n => n[0]).join('').toUpperCase();
                document.getElementById('userAvatar').textContent = initials;
                document.getElementById('userName').textContent = selectedAccount.email || selectedAccount.loginid;
                document.getElementById('userStatus').textContent = 'Connecté';
            }
        }
        
        function fetchAccounts() {
            showNotification('Récupération des comptes en cours...', 'info');
            
            // Récupérer les comptes de l'utilisateur
            const url = `https://deriv.binary.com/https://www.binary.com/en/api?action=authorize&authorize=${token}&app_id=${appId}`;
            
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    console.log('Réponse autorisation:', data);
                    
                    if (data.error) {
                        showNotification(`Erreur: ${data.error.message}`, 'error');
                        return;
                    }
                    
                    // Maintenant, récupérer la liste des comptes
                    const accountsUrl = `https://deriv.binary.com/https://www.binary.com/en/api?action=trading_platform_accounts&trading_platform_accounts=1&app_id=${appId}`;
                    
                    return fetch(accountsUrl);
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Réponse comptes:', data);
                    
                    if (data.error) {
                        showNotification(`Erreur: ${data.error.message}`, 'error');
                        return;
                    }
                    
                    // Filtrer les comptes pour ne garder que les comptes Deriv
                    accounts = data.trading_platform_accounts.filter(account => 
                        account.platform === 'deriv' && (account.account_type === 'demo' || account.account_type === 'real')
                    );
                    
                    if (accounts.length === 0) {
                        showNotification('Aucun compte Deriv trouvé', 'error');
                        return;
                    }
                    
                    // Afficher les comptes
                    displayAccounts();
                    
                    showNotification(`${accounts.length} comptes trouvés`, 'success');
                })
                .catch(error => {
                    console.error('Erreur:', error);
                    showNotification(`Erreur: ${error.message}`, 'error');
                });
        }
        
        function displayAccounts() {
            accountsList.innerHTML = '';
            
            accounts.forEach((account, index) => {
                const accountCard = document.createElement('div');
                accountCard.className = 'account-card';
                accountCard.dataset.index = index;
                
                const accountType = account.account_type === 'demo' ? 'Démo' : 'Réel';
                const accountIcon = account.account_type === 'demo' ? 'fas fa-coins' : 'fas fa-dollar-sign';
                const accountColor = account.account_type === 'demo' ? 'var(--warning)' : 'var(--success)';
                
                accountCard.innerHTML = `
                    <div class="account-header">
                        <div class="account-type">
                            <i class="${accountIcon}" style="color: ${accountColor}"></i>
                            ${accountType}
                        </div>
                        <div class="account-balance">$${parseFloat(account.balance).toFixed(2)}</div>
                    </div>
                    <div class="account-details">
                        <div>ID: ${account.loginid}</div>
                        <div>Devise: ${account.currency || 'USD'}</div>
                        ${account.email ? `<div>Email: ${account.email}</div>` : ''}
                    </div>
                `;
                
                accountCard.addEventListener('click', () => {
                    // Supprimer la classe selected de toutes les cartes
                    document.querySelectorAll('.account-card').forEach(card => {
                        card.classList.remove('selected');
                    });
                    
                    // Ajouter la classe selected à la carte cliquée
                    accountCard.classList.add('selected');
                    
                    // Mettre à jour le compte sélectionné
                    selectedAccount = account;
                    
                    // Mettre à jour les informations de l'utilisateur
                    updateUserInfo();
                    
                    // Mettre à jour le statut de connexion
                    connectionStatus = 'connected';
                    updateDebugInfo();
                    
                    // Afficher la section API
                    loginSection.classList.add('hidden');
                    apiSection.classList.remove('hidden');
                    tokenForm.classList.add('hidden');
                    
                    showNotification(`Compte ${accountType} sélectionné`, 'success');
                });
                
                accountsList.appendChild(accountCard);
            });
            
            // Afficher la section de sélection des comptes
            accountSelection.classList.remove('hidden');
        }
        
        function testAPIConnection() {
            addTerminalMessage('request', 'Test de connexion API REST');
            
            const url = `https://deriv.binary.com/https://www.binary.com/en/api?action=authorize&authorize=${token}&app_id=${appId}`;
            
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    console.log('Réponse API:', data);
                    
                    if (data.error) {
                        addTerminalMessage('error', `Erreur: ${data.error.message}`);
                        showNotification(`Erreur API: ${data.error.message}`, 'error');
                    } else {
                        addTerminalMessage('response', `Autorisation réussie pour ${data.authorize.email}`);
                        showNotification('Connecté avec succès!', 'success');
                    }
                })
                .catch(error => {
                    console.error('Erreur:', error);
                    addTerminalMessage('error', `Erreur de connexion: ${error.message}`);
                    showNotification(`Erreur de connexion: ${error.message}`, 'error');
                });
        }
        
        function getMarketData(market) {
            addTerminalMessage('request', `Obtention des données pour ${market}`);
            
            const url = `https://deriv.binary.com/https://www.binary.com/en/api?action=ticks&ticks=${market}&app_id=${appId}`;
            
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    console.log('Réponse prix:', data);
                    
                    if (data.error) {
                        addTerminalMessage('error', `Erreur: ${data.error.message}`);
                        showNotification(`Erreur API: ${data.error.message}`, 'error');
                    } else {
                        addTerminalMessage('response', `Données reçues pour ${data.tick.symbol}: ${data.tick.quote}`);
                        showNotification(`Prix obtenu pour ${market}: ${data.tick.quote}`, 'success');
                    }
                })
                .catch(error => {
                    console.error('Erreur:', error);
                    addTerminalMessage('error', `Erreur de connexion: ${error.message}`);
                    showNotification(`Erreur de connexion: ${error.message}`, 'error');
                });
        }
    </script>
</body>
</html>